{"id":"Focm","dependencies":[{"name":"/home/kasanu/Desktop/Learning/gonusi.github.io/OAuthClient/package.json","includedInParent":true,"mtime":1630924210830},{"name":"regenerator-runtime/runtime","loc":{"line":1,"column":7},"parent":"/home/kasanu/Desktop/Learning/gonusi.github.io/OAuthClient/index.js","resolved":"/home/kasanu/Desktop/Learning/gonusi.github.io/node_modules/regenerator-runtime/runtime.js"},{"name":"./OAuthClient","loc":{"line":2,"column":24},"parent":"/home/kasanu/Desktop/Learning/gonusi.github.io/OAuthClient/index.js","resolved":"/home/kasanu/Desktop/Learning/gonusi.github.io/OAuthClient/OAuthClient.js"},{"name":"oidc-client","loc":{"line":3,"column":28},"parent":"/home/kasanu/Desktop/Learning/gonusi.github.io/OAuthClient/index.js","resolved":"/home/kasanu/Desktop/Learning/gonusi.github.io/OAuthClient/node_modules/oidc-client/lib/oidc-client.min.js"}],"generated":{"js":"\"use strict\";require(\"regenerator-runtime/runtime\");var e=n(require(\"./OAuthClient\")),t=require(\"oidc-client\");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,o,r,a,i){try{var c=e[a](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,u,\"next\",e)}function u(e){o(i,r,a,c,u,\"throw\",e)}c(void 0)})}}function a(){return i.apply(this,arguments)}function i(){return(i=r(regeneratorRuntime.mark(function t(){var n,o,r,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new e.default({clientId:\"0oa1n8fy6dZUEG6M15d7\",redirectURI:\"https://kasparoauth.local:8000/redirect.html\",storageKey:\"OAUTH_METADATA\",metadataURL:\"https://dev-90897551.okta.com/oauth2/default/.well-known/oauth-authorization-server\",forceMetadataUpdate:!0});case 2:if(n=t.sent,\"/index.html\"===window.location.pathname&&document.getElementById(\"signin\").addEventListener(\"click\",function(){n.signin({scopes:[\"photos\"]})}),\"/redirect.html\"!==window.location.pathname){t.next=14;break}return console.log(\"Callback detected, will try to get token\"),o=new URLSearchParams(window.location.search),r=o.get(\"code\"),a=o.get(\"state\"),console.log(\"got code\",r),t.next=12,n.exchangeCodeToToken({code:r,state:a});case 12:i=t.sent,console.log(\"got token, login done:\",i);case 14:case\"end\":return t.stop()}},t)}))).apply(this,arguments)}a();"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":0}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":52}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":56}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":58}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":60}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":68}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":86}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":88}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":96}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":111}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":120}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":122}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":125}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":132}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":135}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":137}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":148}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":150}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":151}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":159}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":162}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":171}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":173}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":175}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":177}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":179}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":181}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":183}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":185}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":188}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":192}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":196}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":198}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":200}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":203}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":206}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":208}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":210}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":216}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":222}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":225}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":237}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":239}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":242}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":244}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":249}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":251}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":254}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":262}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":270}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":273}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":278}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":280}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":283}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":292}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":294}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":297}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":304}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":315}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":319}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":321}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":326}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":328}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":338}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":345}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":349}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":357}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":366}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":368}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":371}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":375}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":377}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":379}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":385}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":387}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":390}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":399}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":401}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":404}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":406}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":408}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":410}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":412}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":414}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":416}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":423}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":426}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":435}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":437}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":440}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":442}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":444}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":446}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":448}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":450}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":452}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":460}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":463}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":470}},{"source":"index.js","name":"DemoApp","original":{"line":5,"column":15},"generated":{"line":1,"column":476}},{"source":"index.js","name":"DemoApp","original":{"line":5,"column":15},"generated":{"line":1,"column":485}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":489}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":496}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":498}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":504}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":509}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":520}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":529}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":533}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":540}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":542}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":544}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":563}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":568}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":577}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":581}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":585}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":587}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":589}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":591}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":593}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":595}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":602}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":621}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":626}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":635}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":638}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":645}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":652}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":654}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":659}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":661}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":667}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":672}},{"source":"index.js","original":{"line":14,"column":23},"generated":{"line":1,"column":674}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":681}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":683}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":688}},{"source":"index.js","original":{"line":14,"column":23},"generated":{"line":1,"column":690}},{"source":"index.js","name":"OauthClient","original":{"line":14,"column":27},"generated":{"line":1,"column":694}},{"source":"index.js","original":{"line":14,"column":23},"generated":{"line":1,"column":696}},{"source":"index.js","original":{"line":14,"column":39},"generated":{"line":1,"column":704}},{"source":"index.js","name":"clientId","original":{"line":15,"column":4},"generated":{"line":1,"column":705}},{"source":"index.js","original":{"line":15,"column":14},"generated":{"line":1,"column":714}},{"source":"index.js","name":"redirectURI","original":{"line":16,"column":4},"generated":{"line":1,"column":737}},{"source":"index.js","original":{"line":16,"column":17},"generated":{"line":1,"column":749}},{"source":"index.js","name":"storageKey","original":{"line":17,"column":4},"generated":{"line":1,"column":796}},{"source":"index.js","original":{"line":17,"column":16},"generated":{"line":1,"column":807}},{"source":"index.js","name":"metadataURL","original":{"line":18,"column":4},"generated":{"line":1,"column":824}},{"source":"index.js","original":{"line":18,"column":17},"generated":{"line":1,"column":836}},{"source":"index.js","name":"forceMetadataUpdate","original":{"line":19,"column":4},"generated":{"line":1,"column":922}},{"source":"index.js","original":{"line":19,"column":25},"generated":{"line":1,"column":943}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":947}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":952}},{"source":"index.js","name":"window","original":{"line":28,"column":6},"generated":{"line":1,"column":954}},{"source":"index.js","name":"client","original":{"line":14,"column":8},"generated":{"line":1,"column":957}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":959}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":961}},{"source":"index.js","original":{"line":22,"column":35},"generated":{"line":1,"column":966}},{"source":"index.js","name":"window","original":{"line":22,"column":6},"generated":{"line":1,"column":982}},{"source":"index.js","name":"location","original":{"line":22,"column":13},"generated":{"line":1,"column":989}},{"source":"index.js","name":"pathname","original":{"line":22,"column":22},"generated":{"line":1,"column":998}},{"source":"index.js","name":"document","original":{"line":23,"column":4},"generated":{"line":1,"column":1008}},{"source":"index.js","name":"getElementById","original":{"line":23,"column":13},"generated":{"line":1,"column":1017}},{"source":"index.js","original":{"line":23,"column":28},"generated":{"line":1,"column":1032}},{"source":"index.js","name":"addEventListener","original":{"line":23,"column":38},"generated":{"line":1,"column":1042}},{"source":"index.js","original":{"line":23,"column":55},"generated":{"line":1,"column":1059}},{"source":"index.js","original":{"line":23,"column":64},"generated":{"line":1,"column":1067}},{"source":"index.js","name":"client","original":{"line":24,"column":6},"generated":{"line":1,"column":1078}},{"source":"index.js","name":"signin","original":{"line":24,"column":13},"generated":{"line":1,"column":1080}},{"source":"index.js","original":{"line":24,"column":20},"generated":{"line":1,"column":1087}},{"source":"index.js","name":"scopes","original":{"line":24,"column":22},"generated":{"line":1,"column":1088}},{"source":"index.js","original":{"line":24,"column":30},"generated":{"line":1,"column":1095}},{"source":"index.js","original":{"line":24,"column":31},"generated":{"line":1,"column":1096}},{"source":"index.js","original":{"line":28,"column":35},"generated":{"line":1,"column":1110}},{"source":"index.js","name":"window","original":{"line":28,"column":6},"generated":{"line":1,"column":1129}},{"source":"index.js","name":"location","original":{"line":28,"column":13},"generated":{"line":1,"column":1136}},{"source":"index.js","name":"pathname","original":{"line":28,"column":22},"generated":{"line":1,"column":1145}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1154}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1155}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1157}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1162}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1165}},{"source":"index.js","name":"client","original":{"line":34,"column":24},"generated":{"line":1,"column":1171}},{"source":"index.js","name":"console","original":{"line":29,"column":4},"generated":{"line":1,"column":1178}},{"source":"index.js","name":"log","original":{"line":29,"column":12},"generated":{"line":1,"column":1186}},{"source":"index.js","original":{"line":29,"column":16},"generated":{"line":1,"column":1190}},{"source":"index.js","name":"urlSearchParams","original":{"line":30,"column":10},"generated":{"line":1,"column":1234}},{"source":"index.js","original":{"line":30,"column":28},"generated":{"line":1,"column":1236}},{"source":"index.js","name":"URLSearchParams","original":{"line":30,"column":32},"generated":{"line":1,"column":1240}},{"source":"index.js","name":"window","original":{"line":30,"column":48},"generated":{"line":1,"column":1256}},{"source":"index.js","name":"location","original":{"line":30,"column":55},"generated":{"line":1,"column":1263}},{"source":"index.js","name":"search","original":{"line":30,"column":64},"generated":{"line":1,"column":1272}},{"source":"index.js","name":"code","original":{"line":31,"column":10},"generated":{"line":1,"column":1280}},{"source":"index.js","name":"urlSearchParams","original":{"line":31,"column":17},"generated":{"line":1,"column":1282}},{"source":"index.js","name":"get","original":{"line":31,"column":33},"generated":{"line":1,"column":1284}},{"source":"index.js","original":{"line":31,"column":37},"generated":{"line":1,"column":1288}},{"source":"index.js","name":"state","original":{"line":32,"column":10},"generated":{"line":1,"column":1296}},{"source":"index.js","name":"urlSearchParams","original":{"line":32,"column":18},"generated":{"line":1,"column":1298}},{"source":"index.js","name":"get","original":{"line":32,"column":34},"generated":{"line":1,"column":1300}},{"source":"index.js","original":{"line":32,"column":38},"generated":{"line":1,"column":1304}},{"source":"index.js","name":"console","original":{"line":33,"column":4},"generated":{"line":1,"column":1313}},{"source":"index.js","name":"log","original":{"line":33,"column":12},"generated":{"line":1,"column":1321}},{"source":"index.js","original":{"line":33,"column":16},"generated":{"line":1,"column":1325}},{"source":"index.js","name":"code","original":{"line":33,"column":28},"generated":{"line":1,"column":1336}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1339}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1341}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1346}},{"source":"index.js","name":"client","original":{"line":34,"column":24},"generated":{"line":1,"column":1349}},{"source":"index.js","name":"exchangeCodeToToken","original":{"line":34,"column":31},"generated":{"line":1,"column":1351}},{"source":"index.js","original":{"line":34,"column":51},"generated":{"line":1,"column":1371}},{"source":"index.js","name":"code","original":{"line":34,"column":53},"generated":{"line":1,"column":1372}},{"source":"index.js","name":"code","original":{"line":34,"column":53},"generated":{"line":1,"column":1377}},{"source":"index.js","name":"state","original":{"line":34,"column":59},"generated":{"line":1,"column":1379}},{"source":"index.js","name":"state","original":{"line":34,"column":59},"generated":{"line":1,"column":1385}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1389}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1394}},{"source":"index.js","name":"token","original":{"line":34,"column":10},"generated":{"line":1,"column":1397}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1399}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1401}},{"source":"index.js","name":"console","original":{"line":35,"column":4},"generated":{"line":1,"column":1406}},{"source":"index.js","name":"log","original":{"line":35,"column":12},"generated":{"line":1,"column":1414}},{"source":"index.js","original":{"line":35,"column":16},"generated":{"line":1,"column":1418}},{"source":"index.js","name":"token","original":{"line":35,"column":42},"generated":{"line":1,"column":1443}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1446}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1451}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1454}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1458}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1464}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1471}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1473}},{"source":"index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1482}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":1489}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":1495}},{"source":"index.js","original":{"line":77,"column":7},"generated":{"line":1,"column":1500}},{"source":"index.js","name":"DemoApp","original":{"line":77,"column":0},"generated":{"line":1,"column":1511}}],"sources":{"index.js":"import \"regenerator-runtime/runtime\";\nimport OauthClient from \"./OAuthClient\";\nimport { UserManager } from \"oidc-client\";\n\nasync function DemoApp() {\n  // AUTH0\n  // const client = await new OauthClient({\n  //   clientId: \"2GoaMtfiESKdBXqeqdYGV3jCn4lAutKS\",\n  //   redirectURI: \"https://kasparoauth.local:8000/redirect.html\",\n  //   storageKey: \"OAUTH_METADATA\",\n  //   metadataURL: \"https://dev-vgxmc302.us.auth0.com/.well-known/openid-configuration\",\n  // });\n\n  const client = await new OauthClient({\n    clientId: \"0oa1n8fy6dZUEG6M15d7\",\n    redirectURI: \"https://kasparoauth.local:8000/redirect.html\",\n    storageKey: \"OAUTH_METADATA\",\n    metadataURL: \"https://dev-90897551.okta.com/oauth2/default/.well-known/oauth-authorization-server\",\n    forceMetadataUpdate: true,\n  });\n\n  if (window.location.pathname === \"/index.html\") {\n    document.getElementById(\"signin\").addEventListener(\"click\", () => {\n      client.signin({ scopes: [\"photos\"] });\n    });\n  }\n\n  if (window.location.pathname === \"/redirect.html\") {\n    console.log(\"Callback detected, will try to get token\");\n    const urlSearchParams = new URLSearchParams(window.location.search);\n    const code = urlSearchParams.get(\"code\");\n    const state = urlSearchParams.get(\"state\");\n    console.log(\"got code\", code);\n    const token = await client.exchangeCodeToToken({ code, state });\n    console.log(\"got token, login done:\", token);\n  }\n\n  // const userManager = new UserManager({\n  //   authority: \"https://dev-90897551.okta.com/oauth2/default\",\n  //   client_id: \"0oa1n8fy6dZUEG6M15d7\",\n  //   redirect_uri: \"https://kasparoauth.local:8000/redirect.html\",\n  //   scope: \"photos\",\n  //   loadUserInfo: false,\n  //   response_type: \"code\",\n  // });\n\n  // if (window.location.pathname === \"/index.html\") {\n  //   userManager.signinRedirect();\n  // }\n\n  // if (window.location.pathname === \"/redirect.html\") {\n  //   console.log(\"Callback detected, will try to get token\");\n  //   const urlSearchParams = new URLSearchParams(window.location.search);\n  //   const code = urlSearchParams.get(\"code\");\n  //   const state = urlSearchParams.get(\"state\");\n\n  //   userManager\n  //     .signinCallback()\n  //     .then((user) => {\n  //       console.log(\"Logged IN!!!! \", user);\n  //     })\n  //     .catch((e) => {\n  //       // Theres some issue, possibly with response\n  //       // The lib fails after getting response from /token endpoint\n  //       // For now, check token and if it's fine, swallow the errror\n  //       // Possibly the error has to do with incorrect encryption keys set up or similar\n  //       // if (getAccessToken()?.user_id) {\n  //       //   setIsLoggedIn(true);\n  //       //   history.push(\"/private-page\");\n  //       //   return;\n  //       // }\n  //       console.log(\"Login error \", e);\n  //     });\n  // }\n}\n\nDemoApp();\n"},"lineCount":null}},"error":null,"hash":"37b9017250e42dd4dec6ab57080d0fb2","cacheData":{"env":{}}}